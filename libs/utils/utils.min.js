// ==UserScript==
// @author       Journey Over
// @exclude      *
// ==UserLibrary==
// @name         @journeyover/utils
// @description  Utility helpers for my userscripts
// @license      MIT
// @version      1.0.1
// @homepageURL  https://github.com/StylusThemes/Userscripts
// ==/UserScript==

function debounce(fn,wait){let timeoutId=null;return function(...args){if(timeoutId)clearTimeout(timeoutId);const context=this;timeoutId=setTimeout(()=>fn.apply(context,args),wait)}}function Logger(prefix,opts={}){const baseStyle="font-weight: bold; padding:2px 6px; border-radius: 4px;";const formattedPrefix=`[${prefix}]`;const styles={log:"background: #4caf50; color: white;"+baseStyle,error:"background: #f44336; color: white;"+baseStyle,warn:"background: #ff9800; color: black;"+baseStyle,debug:"background: #2196f3; color: white;"+baseStyle};const icons={log:"âœ…",error:"âŒ",warn:"âš ï¸",debug:"ðŸ”"};function format(type,message,...rest){console[type](`%c${icons[type]} ${formattedPrefix}%c ${message}`,styles[type],"",...rest)}function log(message,...rest){format("log",message,...rest)}log.error=function(message,...rest){format("error",message,...rest)};log.warn=function(message,...rest){format("warn",message,...rest)};log.debug=function(message,...rest){if(opts.debug){format("debug",message,...rest)}};log.debugEnabled=!!opts.debug;return log}function waitForElement(selector,timeout=5e3){return new Promise((resolve,reject)=>{const existing=document.querySelector(selector);if(existing)return resolve(existing);const observer=new MutationObserver(()=>{const el=document.querySelector(selector);if(el){observer.disconnect();clearTimeout(timer);resolve(el)}});observer.observe(document.body,{childList:true,subtree:true});const timer=setTimeout(()=>{observer.disconnect();reject(new Error(`Element '${selector}' not found within ${timeout}ms.`))},timeout)})}if(typeof module!=="undefined"&&module.exports){module.exports={debounce:debounce,Logger:Logger,waitForElement:waitForElement}}if(typeof window!=="undefined"){window.debounce=debounce;window.Logger=Logger;window.waitForElement=waitForElement}
